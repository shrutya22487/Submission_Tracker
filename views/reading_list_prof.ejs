<%- include('partials/header') %>

<div class="container-fluid">
    <div class="row">

        <%- include('partials/nav_bar.ejs')%>

        <!-- Working console section -->
        <div class="col-md-6"
             style="background-color: #f9f9f9; width: 100%; height: 100%; margin-left: auto; margin-right: auto; padding: 20px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);">
            <div id="working-console">
                <div class="jumbotron text-center" style="margin-bottom: 20px;">
                    <h1 style="font-size: 4rem; font-weight: bold; color: #333;">Professor Dashboard</h1>
                </div>
                <!-- Form to add a new book -->
                <h2>Add a New Book</h2>
                <form action="/prof_dashboard/add_book" method="POST">
                    <label for="title">Title:</label>
                    <input type="text" id="title" name="title" required><br><br>

                    <label for="genre">Genre:</label>
                    <input type="text" id="genre" name="genre" required><br><br>

                    <label for="conference">Conference:</label>
                    <input type="text" id="conference" name="conference"><br><br>

                    <label for="status">Status:</label>
                    <input type="text" id="status" name="status"><br><br>

                    <label for="link_1">Link 1:</label>
                    <input type="url" id="link_1" name="link_1"><br><br>

                    <label for="link_2">Link 2:</label>
                    <input type="url" id="link_2" name="link_2"><br><br>

                    <button type="submit">Add Book</button>
                </form>

                <hr>

                <!-- Display books grouped by genre -->
                <% if (groupedBooks.length > 0) { %>
                    <% groupedBooks.forEach(genreGroup => { %>
                        <h2><%= genreGroup.genre %></h2>
                        <ul>
                            <% genreGroup.books.forEach(book => { %>
                                <li>
                                    <strong>Title:</strong> <%= book.title %><br>
                                    <strong>Conference:</strong> <%= book.conference || 'N/A' %><br>
                                    <strong>Status:</strong> <%= book.status || 'N/A' %><br>
                                    <strong>Link 1:</strong> <a href="<%= book.link_1 %>" target="_blank"><%= book.link_1 || 'No link' %></a><br>
                                    <strong>Link 2:</strong> <a href="<%= book.link_2 %>" target="_blank"><%= book.link_2 || 'No link' %></a><br>

                                    <!-- Delete book form -->
                                    <form action="/prof_dashboard/delete_book" method="POST" style="display:inline;">
                                        <input type="hidden" name="book_id" value="<%= book.id %>">
                                        <button type="submit">Delete</button>
                                    </form>
                                </li>
                                <hr>
                            <% }) %>
                        </ul>
                    <% }) %>
                <% } else { %>
                    <p>No books found in the reading list.</p>
                <% } %>


            </div>
        </div>

        <!--Prof to do section-->
        <%- include('partials/task_mgmt_prof.ejs')%>

    </div>
</div>

<style>
    /* Search Results Box Styles */
    /* Search Results Box Styles */
    .results-box {
        position: absolute;
        z-index: 1000;
        background-color: #fff;
        width: calc(100% - 20px);
        /* Full width minus padding */
        max-width: 600px;
        padding: 10px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        border-radius: 8px;
        border: 1px solid #ccc;
        margin-top: 5px;
        /* Space between input and results */
        left: 50%;
        /* Center the box */
        transform: translateX(-50%);
        /* Adjust for the width of the box */
    }


    .results-box button {
        width: 100%;
        padding: 10px;
        border: none;
        background: transparent;
        text-align: left;
        cursor: pointer;
        border-radius: 4px;
        /* Rounded corners for buttons */
        transition: background-color 0.3s;
        /* Smooth transition for hover */
    }

    .results-box button:hover {
        background-color: #f0f0f0;
        /* Change background on hover */
    }

    /* Modal Styles (if needed) */
    .modal {
        display: none;
        position: fixed;
        z-index: 1;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: rgba(0, 0, 0, 0.5);
    }

    .modal-content {
        background-color: #fff;
        margin: 15% auto;
        padding: 20px;
        border: 1px solid #888;
        width: 80%;
        max-width: 500px;
    }

    .close-btn {
        float: right;
        font-size: 28px;
        font-weight: bold;
        cursor: pointer;
    }

    .remove-btn {
        cursor: pointer;
        color: red;
        font-weight: bold;
        margin-left: 10px;
    }
</style>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<%- include('partials/footer') %>